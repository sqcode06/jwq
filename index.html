<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Japanese writing quiz</title>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;900&display=swap');
		@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap');

		* {
			margin: 0;
			padding: 0;
			user-select: none;
		}

		html {
			height: 100%;
		}

		body {
			height: 100%;
			background-color: #223;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			font-family: Roboto;
			position: relative;
			top: 0;
			left: 0;
		}

		h1 {
			font-weight: 900;
			font-size: 3em;
			color: #ff4a00;
		}

		button {
			border-radius: 100px;
			background-color: #ff4a00;
			border: 0;
			color: #223;
			width: 20%;
			height: 5%;
			cursor: pointer;
			font-family: Roboto;
			font-weight: 500;
			font-size: 1.6rem;
			margin-top: 2.5%;
		}

		.stats {
			display: grid;
			width: 60%;
			height: 60%;
			grid-template-columns: repeat(3, 33.3333333%);
			grid-template-rows: repeat(3, 33.3333333%);
			font-weight: 900;
			font-size: 2.6em;
			color: #ff4a00;
			background-color: #ff4a00;
			grid-gap: 2px;
		}

		.stats-element, .options-element {
			display: flex;
			align-items: center;
			justify-content: center;
			background-color: #223;
		}

		.options {
			width: 60%;
			height: 60%;
			display: grid;
			grid-template-columns: repeat(8, 12.5%);
			grid-template-rows: repeat(3, 33.3333333333%);
			background-color: #ff4a00;
			color: #ff4a00;
			font-size: 2em;
			font-weight: 900;
			grid-gap: 2px;
		}

		.options-element:nth-of-type(1), .options-element:nth-of-type(4) {
			grid-column: 1 / 3;
		}

		.options-element:nth-of-type(2) {
			grid-column: 3 / 6;
		}

		.options-element:nth-of-type(3) {
			grid-column: 6 / 9;
		}

		.options-element:nth-of-type(5) {
			grid-column: 3 / 5;
		}

		.options-element:nth-of-type(6) {
			grid-column: 5 / 7;
		}

		.options-element:nth-of-type(7) {
			grid-column: 7 / 9;
		}

		.options-element:nth-of-type(8) {
			grid-column: 1 / 5;
		}

		.options-element:nth-of-type(9) {
			grid-column: 5 / 9;
		}

		.options-element > button {
			width: 60%;
			height: 40%;
		}

		.radio {
			width: 70%;
			height: 70%;
			cursor: pointer;
			display: flex;
			align-items: center;	
			justify-content: center;
			border-radius: 20px;
		}

		.radio-enabled {
			color: #223;
			background-color: #ff4a00;
		}

		.game {
			display: grid;
			width: 80%;
			height: 80%;
			grid-template-rows: repeat(7, 14.2857142857%);
			grid-template-columns: repeat(4, 25%);
			grid-gap: 5px;
			color: #ff4a00;
		}

		.game-element {
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.game-element:first-of-type {
			grid-area: 1 / 2 / 4 / 4;
			font-weight: 700;
			font-family: 'Noto Sans JP';
			font-size: 10em;
		}

		.game-element:nth-of-type(2) {
			grid-area: 4 / 1 / 5 / 3;
		}

		.game-element:nth-of-type(3) {
			grid-area: 4 / 3 / 5 / 5;
		}

		.game-element:nth-of-type(4) {
			grid-area: 5 / 1 / 6 / 3;
		}

		.game-element:nth-of-type(5) {
			grid-area: 5 / 3 / 6 / 5;
		}

		.game-element:nth-of-type(6) {
			grid-area: 7 / 2 / 8 / 3;
			font-size: 3em;
			font-weight: 900;
		}

		.game-element:nth-of-type(7) {
			grid-area: 7 / 3 / 8 / 4;
			font-size: 3em;
			font-weight: 900;
		}

		.answer-button {
			width: 60%;
			height: 60%;
			font-size: 2em;
			font-weight: 900;
		}

		.game-element:nth-of-type(8) {
			grid-area: -1 / -1 / -2 / -2;
		}

		.game-element:nth-of-type(8)>button {
			width: 80%;
			height: 60%;
		}

		.stats-element:nth-child(7) {
			font-size: 0.8em;
		}

		.confirm {
			width: 40%;
			height: 16%;
			background-color: #223;
			display: grid;
			border: 2px solid #ff4a00;
			grid-template-columns: 1fr 1fr;
			grid-template-rows: 50% 50%;
			border-radius: 10px;
			z-index: 999;
			backdrop-filter: blur(3px);
			left: 50%;
			transform: translateX(-50%);
		}

		/*.confirm-container {
			width: 100%;
			height: 100%;
			align-items: center;
			justify-content: center;
			position: absolute;
			z-index: 999;
			top: 0;
			left: 0;
			border: none;
			padding: 0;
		}*/

		.confirm-text {
			font-family: Roboto;
			color: #ff4a00;
			font-weight: 500;
			font-size: 1.6em;
		}

		.confirm-item {
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.confirm-item:nth-child(1) {
			grid-column: 1 / 3;
		}

		.confirm-item > button {
			border-radius: 100px;
			background-color: #ff4a00;
			border: 0;
			color: #223;
			width: 80%;
			height: 50%;
			cursor: pointer;
			font-family: Roboto;
			font-weight: 500;
			font-size: 1.4em;
		}
	</style>
</head>
<body>
	<dialog class="confirm" style="display: none;">
		<div class="confirm-item"><div class="confirm-text">Are you sure want to continue?</div></div>
		<div class="confirm-item"><button class="confirm-yes">Yes</button></div>
		<div class="confirm-item"><button class="confirm-no">No</button></div>
	</dialog>
	<h1 class="hello-h1">JAPANESE WRITING QUIZ</h1>
	<button class="start-button">START</button>
	<button class="stats-button">STATS</button>
	<button class="options-button">OPTIONS</button>
	<div class="stats" style="display: none">  
		<div class="stats-element"></div>
		<div class="stats-element">HIRAGANA</div>
		<div class="stats-element">KATAKANA</div>
		<div class="stats-element">BEST SCORE</div>
		<div class="stats-element">0</div>
		<div class="stats-element">0</div>
		<div class="stats-element">TOTAL PLAYED (sec)</div>
		<div class="stats-element">0</div>
		<div class="stats-element">0</div>
	</div>
	<button class="back-stats-button" style="display: none">BACK</button>
	<div class="options" style="display: none">
		<div class="options-element">MODE</div>
		<div class="options-element"><div class="radio radio-mode">HIRAGANA</div></div>
		<div class="options-element"><div class="radio radio-mode">KATAKANA</div></div>
		<div class="options-element">DIFFICULTY</div>
		<div class="options-element"><div class="radio radio-difficulty">EASY</div></div>
		<div class="options-element"><div class="radio radio-difficulty">NORMAL</div></div>
		<div class="options-element"><div class="radio radio-difficulty">HARD</div></div>
		<div class="options-element"><button class="reset-settings-button">RESET SETTINGS</button></div>
		<div class="options-element"><button class="reset-progress-button">RESET STATS</button></div>
	</div>
	<div class="game" style="display: none">
		<div class="game-element"></div>
		<div class="game-element"><button class="answer-button"></button></div>
		<div class="game-element"><button class="answer-button"></button></div>
		<div class="game-element"><button class="answer-button"></button></div>
		<div class="game-element"><button class="answer-button"></button></div>
		<div class="game-element">SECONDS LEFT:</div>
		<div class="game-element timer">--</div>
		<div class="game-element"><button class="exit-button">EXIT</button></div>
	</div>
	<button class="back-options-button" style="display: none">BACK</button>
	<script>
		const $hello_h1 = document.querySelector(".hello-h1");
		const $start_button = document.querySelector(".start-button");
		const $stats_button = document.querySelector(".stats-button");
		const $options_button = document.querySelector(".options-button");

		const $stats = document.querySelector(".stats");
		const $back_stats_button = document.querySelector(".back-stats-button");

		const $stats_bs_h = $stats.childNodes[9];
		const $stats_bs_k = $stats.childNodes[11];
		const $stats_tp_h = $stats.childNodes[15];
		const $stats_tp_k = $stats.childNodes[17];

		const $options = document.querySelector(".options");
		const $reset_settings_button = document.querySelector(".reset-settings-button");
		const $reset_progress_button = document.querySelector(".reset-progress-button");
		const $back_options_button = document.querySelector(".back-options-button");

		const $main_elements = [{item: $hello_h1, type: 'block'}, {item: $start_button, type: 'block'}, {item: $stats_button, type: 'block'}, {item: $options_button, type: 'block'}];
		const $stats_elements = [{item: $stats, type: 'grid'}, {item: $back_stats_button, type: 'block'}];
		const $options_elements = [{item: $options, type: 'grid'}, {item: $back_options_button, type: 'block'}];
		const $game = {item: document.querySelector('.game'), type: 'grid'};
		const $answer_buttons = document.querySelectorAll('.answer-button');
		const $exit_button = document.querySelector('.exit-button');

		const $timer = document.querySelector('.timer');

		const $radio_mode_nodelist = document.querySelectorAll('.radio-mode');
		const $radio_difficulty_nodelist = document.querySelectorAll('.radio-difficulty');

		let $best_score = {hiragana: 0, katakana: 0};

		let $total_played = {hiragana: 0, katakana: 0};

		const $game_dict_hiragana = [
			{j: 'あ', r: 'a'},
			{j: 'か', r: 'ka'},
			{j: 'さ', r: 'sa'},
			{j: 'た', r: 'ta'},
			{j: 'な', r: 'na'},
			{j: 'は', r: 'ha'},
			{j: 'ま', r: 'ma'},
			{j: 'や', r: 'ya'},
			{j: 'ら', r: 'ra'},
			{j: 'わ', r: 'wa'},
			{j: 'が', r: 'ga'},
			{j: 'ざ', r: 'za'},
			{j: 'だ', r: 'da'},
			{j: 'ば', r: 'ba'},
			{j: 'ぱ', r: 'pa'},
			{j: 'い', r: 'i'},
			{j: 'き', r: 'ki'},
			{j: 'し', r: 'shi'},
			{j: 'ち', r: 'chi'},
			{j: 'に', r: 'ni'},
			{j: 'ひ', r: 'hi'},
			{j: 'み', r: 'mi'},
			{j: 'り', r: 'ri'},
			{j: 'ぎ', r: 'gi'},
			{j: 'じ', r: 'ji'},
			{j: 'ぢ', r: 'dji'},
			{j: 'び', r: 'bi'},
			{j: 'ぴ', r: 'pi'},
			{j: 'お', r: 'o'},
			{j: 'こ', r: 'ko'},
			{j: 'そ', r: 'so'},
			{j: 'と', r: 'to'},
			{j: 'の', r: 'no'},
			{j: 'ほ', r: 'ho'},
			{j: 'も', r: 'mo'},
			{j: 'よ', r: 'yo'},
			{j: 'ろ', r: 'ro'},
			{j: 'を', r: 'wo'},
			{j: 'ご', r: 'go'},
			{j: 'ぞ', r: 'zo'},
			{j: 'ど', r: 'do'},
			{j: 'ぼ', r: 'bo'},
			{j: 'ぽ', r: 'po'},
			{j: 'う', r: 'u'},
			{j: 'く', r: 'ku'},
			{j: 'す', r: 'su'},
			{j: 'つ', r: 'tsu'},
			{j: 'ぬ', r: 'nu'},
			{j: 'ふ', r: 'fu'},
			{j: 'む', r: 'mu'},
			{j: 'ゆ', r: 'yu'},
			{j: 'る', r: 'ru'},
			{j: 'ぐ', r: 'gu'},
			{j: 'ず', r: 'zu'},
			{j: 'づ', r: 'dzu'},
			{j: 'ぶ', r: 'bu'},
			{j: 'ぷ', r: 'pu'},
			{j: 'え', r: 'e'},
			{j: 'け', r: 'ke'},
			{j: 'せ', r: 'se'},
			{j: 'て', r: 'te'},
			{j: 'ね', r: 'ne'},
			{j: 'へ', r: 'he'},
			{j: 'め', r: 'me'},
			{j: 'れ', r: 're'},
			{j: 'げ', r: 'ge'},
			{j: 'ぜ', r: 'ze'},
			{j: 'で', r: 'de'},
			{j: 'べ', r: 'be'},
			{j: 'ん', r: 'n'}
		];

		const $game_dict_katakana = [
			{j: 'ア', r: 'a'},
			{j: 'カ', r: 'ka'},
			{j: 'サ', r: 'sa'},
			{j: 'タ', r: 'ta'},
			{j: 'ナ', r: 'na'},
			{j: 'ハ', r: 'ha'},
			{j: 'マ', r: 'ma'},
			{j: 'ヤ', r: 'ya'},
			{j: 'ラ', r: 'ra'},
			{j: 'ワ', r: 'wa'},
			{j: 'ガ', r: 'ga'},
			{j: 'ザ', r: 'za'},
			{j: 'ダ', r: 'da'},
			{j: 'バ', r: 'ba'},
			{j: 'パ', r: 'pa'},
			{j: 'イ', r: 'i'},
			{j: 'キ', r: 'ki'},
			{j: 'シ', r: 'shi'},
			{j: 'チ', r: 'chi'},
			{j: 'ニ', r: 'ni'},
			{j: 'ヒ', r: 'hi'},
			{j: 'ミ', r: 'mi'},
			{j: 'リ', r: 'ri'},
			{j: 'ギ', r: 'gi'},
			{j: 'ジ', r: 'ji'},
			{j: 'ヂ', r: 'dji'},
			{j: 'ビ', r: 'bi'},
			{j: 'ピ', r: 'pi'},
			{j: 'オ', r: 'o'},
			{j: 'コ', r: 'ko'},
			{j: 'ソ', r: 'so'},
			{j: 'ト', r: 'to'},
			{j: 'ノ', r: 'no'},
			{j: 'ホ', r: 'ho'},
			{j: 'モ', r: 'mo'},
			{j: 'ヨ', r: 'yo'},
			{j: 'ロ', r: 'ro'},
			{j: 'ヲ', r: 'wo'},
			{j: 'ゴ', r: 'go'},
			{j: 'ゾ', r: 'zo'},
			{j: 'ド', r: 'do'},
			{j: 'ボ', r: 'bo'},
			{j: 'ポ', r: 'po'},
			{j: 'ウ', r: 'u'},
			{j: 'ク', r: 'ku'},
			{j: 'ス', r: 'su'},
			{j: 'ツ', r: 'tsu'},
			{j: 'ヌ', r: 'nu'},
			{j: 'フ', r: 'fu'},
			{j: 'ム', r: 'mu'},
			{j: 'ユ', r: 'yu'},
			{j: 'ル', r: 'ru'},
			{j: 'グ', r: 'gu'},
			{j: 'ズ', r: 'zu'},
			{j: 'ヅ', r: 'dzu'},
			{j: 'ブ', r: 'bu'},
			{j: 'プ', r: 'pu'},
			{j: 'エ', r: 'e'},
			{j: 'ケ', r: 'ke'},
			{j: 'セ', r: 'se'},
			{j: 'テ', r: 'te'},
			{j: 'ネ', r: 'ne'},
			{j: 'ヘ', r: 'he'},
			{j: 'メ', r: 'me'},
			{j: 'レ', r: 're'},
			{j: 'ゲ', r: 'ge'},
			{j: 'ゼ', r: 'ze'},
			{j: 'デ', r: 'de'},
			{j: 'ベ', r: 'be'},
			{j: 'ペ', r: 'n'}
		];

		let $radio_mode = [];
		let $radio_difficulty = [];

		$radio_mode_nodelist.forEach((item, index) => $radio_mode[index] = {item: item, enabled: false});
		$radio_difficulty_nodelist.forEach((item, index) => $radio_difficulty[index] = {item: item, enabled: false});

		window.addEventListener('load', () => {
			loadStats();
			loadSettings();
		});

		onclick($stats_button, () => {
			$main_elements.forEach(element => switchView(element.item, element.type));
			$stats_elements.forEach(element => switchView(element.item, element.type));
		});

		onclick($back_stats_button, () => {
			$main_elements.forEach(element => switchView(element.item, element.type));
			$stats_elements.forEach(element => switchView(element.item, element.type));
		});

		onclick($options_button, () => {
			$main_elements.forEach(element => switchView(element.item, element.type));
			$options_elements.forEach(element => switchView(element.item, element.type));
		});

		onclick($back_options_button, () => {
			$main_elements.forEach(element => switchView(element.item, element.type));
			$options_elements.forEach(element => switchView(element.item, element.type));
		});

		let maxTime = 150;
		let numOfQuestions = 10;
		let questionsPassed = 0;

		let time = 150;

		let interval;
		let isButtonPressed = false;
		let correctAnswer_id;
		let answer_id;
		let played = 0;
		let score = 0;

		onclick($start_button, () => {
			$main_elements.forEach(element => switchView(element.item, element.type));
			switchView($game.item, $game.type);
			if(getOptions()[1] == 'easy')
			{
				maxTime = 150;
				numOfQuestions = 10;
			}
			else if(getOptions()[1] == 'normal')
			{
				maxTime = 100;
				numOfQuestions = 20;
			}
			else
			{
				maxTime = 50;
				numOfQuestions = 30;
			}
			start();
		});

		onclick($exit_button, () => {
			if($exit_button.innerText == 'Finish')
			{
				$main_elements.forEach(element => switchView(element.item, element.type));
				switchView($game.item, $game.type);
				clearInterval(interval);
				$timer.innerText = '--';
				time = 0;
				questionsPassed = 0;
				played = 0;
				score = 0;
			}
			else
			{
				confirmMode = 'exitGame';
				createConfirm('Are you sure want to exit? Your achievements won\'t be saved.')
			}
		});

		$answer_buttons.forEach((element, index) => {
			element.addEventListener('click', () => {
				answer_id = index;
				isButtonPressed = true;
				$answer_buttons.forEach(element => element.style.pointerEvents = 'none');
			})
		});

		function start()
		{
			$exit_button.innerText = 'Exit';
			time = maxTime;
			generateAnswers(getOptions()[0]);
			generateAnswers();
			interval = setInterval(function(){
				if(time % 10 == 0)
				{
					$timer.innerText = time / 10;
					played++;
				}
				if(isButtonPressed) checkAnswers();
				if(time == 0) timeOut();
				time--;
			}, 100);
		}

		function generateAnswers(dic)
		{
			if(dic == 'hiragana')
			{
				let random = get4UniqueRandom($game_dict_hiragana.length);
				let correct = $game_dict_hiragana[random[0]];
				$game.item.childNodes[1].innerText = correct.j;
				correctAnswer_id = getRandomInt(3);
				$answer_buttons[correctAnswer_id].innerText = correct.r.toUpperCase();
				Array.from($answer_buttons).filter((item, index) => index != correctAnswer_id).forEach((item, index) => {
					item.innerText = $game_dict_hiragana[random[index + 1]].r.toUpperCase();
				});
				dyeButtons('clear');
				$answer_buttons.forEach(element => element.style.pointerEvents = 'all');
			}
			if(dic == 'katakana')
			{
				let random = get4UniqueRandom($game_dict_katakana.length);
				let correct = $game_dict_katakana[random[0]];
				$game.item.childNodes[1].innerText = correct.j;
				correctAnswer_id = getRandomInt(3);
				$answer_buttons[correctAnswer_id].innerText = correct.r.toUpperCase();
				Array.from($answer_buttons).filter((item, index) => index != correctAnswer_id).forEach((item, index) => {
					item.innerText = $game_dict_katakana[random[index + 1]].r.toUpperCase();
				});
				dyeButtons('clear');
				$answer_buttons.forEach(element => element.style.pointerEvents = 'all');
			}
		}

		function fillButtonWithAnswer(element, dict)
		{
			let value = dict[getRandomInt(dict.length)].r.toUpperCase();
			element.innerText = value;
			return value;
		}

		function dyeButtons(mode)
		{
			if(mode == 'correct') $answer_buttons[correctAnswer_id].style.backgroundColor = '#149c2d';
			else if(mode == 'wrong')
			{
				$answer_buttons[correctAnswer_id].style.backgroundColor = '#149c2d';
				$answer_buttons[answer_id].style.backgroundColor = '#ad0c00';
			}
			else if(mode == 'clear') $answer_buttons.forEach(element => element.style.backgroundColor = '#ff4a00');
			else
			{
				$answer_buttons[correctAnswer_id].style.backgroundColor = '#149c2d';
				Array.from($answer_buttons).filter((element, index) => index != correctAnswer_id).forEach(element => element.style.backgroundColor = '#ad0c00');
			}
		}

		function checkAnswers()
		{
			$timer.innerText = '--';
			clearInterval(interval);
			isButtonPressed = false;
			if(answer_id == correctAnswer_id)
			{
				dyeButtons('correct');
				score++;
			}
			else dyeButtons('wrong');
			time = maxTime;
			nextTimeOut();
		}

		function timeOut()
		{
			$timer.innerText = '--';
			clearInterval(interval);
			dyeButtons('time');
			nextTimeOut();
		}

		function calculateScore()
		{
			$exit_button.innerText = 'Finish';
			questionsPassed = 0;
			let currentStats = getStats();
			if(getOptions()[0] == 'hiragana')
			{
				if(getStats()[0].hiragana <= score)
				{
					currentStats[0].hiragana = score;
				}
				currentStats[1].hiragana += played;
			}
			if(getOptions()[0] == 'katakana')
			{
				if(getStats()[0].katakana <= score)
				{
					currentStats[0].katakana = score;
				}
				currentStats[1].katakana += played;
			}
			setStats(currentStats[0], currentStats[1]);
			score = 0;
			played = 0;
			loadStats();
		}

		function nextTimeOut()
		{
			questionsPassed++;
			if(questionsPassed == numOfQuestions) calculateScore();
			else
			{
				setTimeout(function(){
					start();
				}, 3000);
			}
		}

		$radio_mode.forEach(item => {
			onclick(item.item, () => {
				$radio_mode.forEach(item1 => item1.enabled = false);
				$radio_mode.forEach(item1 => item1.item.classList.remove('radio-enabled'));
				item.item.classList.add('radio-enabled');
				item.enabled = true;
				setOptions(item.item.innerText.toLowerCase(), getOptions()[1]);
			});
		});

		$radio_difficulty.forEach(item => {
			onclick(item.item, () => {
				$radio_difficulty.forEach(item1 => item1.enabled = false);
				$radio_difficulty.forEach(item1 => item1.item.classList.remove('radio-enabled'));
				item.item.classList.add('radio-enabled');
				item.enabled = true;
				setOptions(getOptions()[0], item.item.innerText.toLowerCase());
			});
		});

		onclick($reset_settings_button, () => {
			confirmMode = 'settings';
			createConfirm('Are you sure want to reset settings?');
		});

		onclick($reset_progress_button, () => {
			confirmMode = 'progress';
			createConfirm('Are you sure want to reset progress?');
		});

		function setOptions(mode, difficulty)
		{
			localStorage.setItem('mode', mode);
			localStorage.setItem('difficulty', difficulty);
		}

		function getOptions()
		{
			return [localStorage.getItem('mode'), localStorage.getItem('difficulty')];
		}

		function loadSettings()
		{
			$radio_mode.forEach(item => {
				item.enabled = false;
				item.item.classList.remove('radio-enabled');
			});
			$radio_difficulty.forEach(item => {
				item.enabled = false;
				item.item.classList.remove('radio-enabled');
			});
			if(getOptions()[0] != null && getOptions()[1] != null)
			{
				$radio_mode.find(element => element.item.innerText.toLowerCase() == getOptions()[0]).enabled = true;
				$radio_mode.find(element => element.item.innerText.toLowerCase() == getOptions()[0]).item.classList.add('radio-enabled');
				$radio_difficulty.find(element => element.item.innerText.toLowerCase() == getOptions()[1]).enabled = true;
				$radio_difficulty.find(element => element.item.innerText.toLowerCase() == getOptions()[1]).item.classList.add('radio-enabled');
			}
			else
			{
				setOptions('hiragana', 'easy');
				loadSettings();
			}
		}

		function setStats(best_score, total_played)
		{
			localStorage.setItem('best-score', JSON.stringify(best_score));
			localStorage.setItem('total-played', JSON.stringify(total_played));
		}

		function getStats()
		{
			return [JSON.parse(localStorage.getItem('best-score')), JSON.parse(localStorage.getItem('total-played'))];
		}

		function loadStats()
		{
			if(getStats()[0] != null & getStats()[1] != null)
			{
				$stats_bs_h.innerText = getStats()[0].hiragana;
				$stats_bs_k.innerText = getStats()[0].katakana;
				$stats_tp_h.innerText = getStats()[1].hiragana;
				$stats_tp_k.innerText = getStats()[1].katakana;
				$best_score = getStats()[0];
				$total_played = getStats()[1];
			}
			else
			{
				setStats({hiragana: 0, katakana: 0}, {hiragana: 0, katakana: 0});
				loadStats();
			}
		}

		function onclick(object, handler)
		{
			object.addEventListener('click', handler);
		}

		function switchView(element, type)
		{
			if(element.style.display == 'none') 
				element.style.display = type;
			else element.style.display = 'none';
		}

		function get4UniqueRandom(max)
		{
			let random = [0, 0, 0, 0];
			while(
					random.filter(element => element == random[0])[1] != undefined ||
					random.filter(element => element == random[1])[1] != undefined ||
					random.filter(element => element == random[2])[1] != undefined ||
					random.filter(element => element == random[3])[1] != undefined
				)
			{
				random.forEach((element, index) => random[index] = getRandomInt(max));
			}
			return random;
		}

		function getRandomInt(max)
		{
		  return Math.round(Math.random() * max);
		}

		let confirmMode;

		const $confirm = document.querySelector('.confirm');
		const $confirm_yes_btn = document.querySelector('.confirm-yes');
		const $confirm_no_btn = document.querySelector('.confirm-no');
		const $confirm_text = document.querySelector('.confirm-text');

		$confirm_yes_btn.addEventListener('click', () => {
			$confirm.style.display = 'none';
			outputConfirm();
		});

		$confirm_no_btn.addEventListener('click', () => {
			$confirm.style.display = 'none';
		});

		function createConfirm(text)
		{
			$confirm_text.innerText = text;
			$confirm.style.display = 'grid';
		}

		function outputConfirm(answer)
		{
			if(confirmMode == 'settings')
			{
				$radio_mode.forEach(item => {
					item.enabled = false;
					item.item.classList.remove('radio-enabled');
				});
				$radio_mode[0].enable = true;
				$radio_mode[0].item.classList.add('radio-enabled');
				$radio_difficulty.forEach(item => {
					item.enabled = false;
					item.item.classList.remove('radio-enabled');
				});
				$radio_difficulty[0].enable = true;
				$radio_difficulty[0].item.classList.add('radio-enabled');
				setOptions('hiragana', 'easy');
			}

			if(confirmMode == 'progress')
			{
				setStats({hiragana: 0, katakana: 0}, {hiragana: 0, katakana: 0});
				loadStats();
			}

			if(confirmMode == 'exitGame')
			{
				$main_elements.forEach(element => switchView(element.item, element.type));
				switchView($game.item, $game.type);
				clearInterval(interval);
				$timer.innerText = '--';
				time = 0;
				questionsPassed = 0;
				played = 0;
				score = 0;
			}
		}
	</script>
</body>
</html>